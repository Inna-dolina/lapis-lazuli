################################################################################
# Copyright <%= config[:year] %> spriteCloud B.V. All rights reserved.
# Generated by LapisLazuli, version <%= config[:lapis_lazuli][:version] %>
# Author: "<%= config[:user] %>" <<%= config[:email] %>>

# validation_steps.rb is used to confirm that certain elements are displayed on the page.

Then(/^the page should display as logged (in|out) state$/) do |logged|
  # pending # Write code here that turns the phrase above into concrete actions

  # Adjust variable for checking logged in or logged out state.
  if logged == 'in'
    condition = :until
    message = 'Unable to find profile picture, the user wasnt logged in successfully'
  elsif logged == 'out'
    condition = :while
    message = 'The profile picture is present, indicating that the user did not log out successfully'
  end


  # Try to find a way to confirm that a user is logged out.
  # Easiest way is to a reversed check on an element that is only present when you're logged in
  # For example, the profile picture
  browser.wait(
    :img => {:class => 'user-gravatar'},
    :condition => condition,
    :timeout => 5,
    :message => message
  )
  # Lapis lazuli will automatically create a screenshot if this step fails.
end
